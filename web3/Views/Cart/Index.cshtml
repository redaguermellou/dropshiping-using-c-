@model ecom.ViewModels.CartViewModel
@{
    ViewData["Title"] = "Debug Cart";
}

<h1>Cart Debug View</h1>

<h2>Model Status:</h2>
<p>Model is null: @(Model == null)</p>

@if (Model != null)
{
    <h2>Cart Status:</h2>
    <p>Cart is null: @(Model.Cart == null)</p>

    @if (Model.Cart != null)
    {
        <h2>Items Status:</h2>
        <p>Items is null: @(Model.Cart.Items == null)</p>
        <p>Items count: @Model.Cart.Items?.Count()</p>

        @if (Model.Cart.Items != null && Model.Cart.Items.Any())
        {
            <h2>Cart Items:</h2>
            <ul>
                @foreach (var item in Model.Cart.Items)
                {
                    <li>
                        Item ID: @item.Id,
                        Quantity: @item.Quantity,
                        Product Name: @(item.Product?.Name ?? "NULL"),
                        Subtotal: @item.Subtotal
                    </li>
                }
            </ul>

            <h2>Totals:</h2>
            <p>Total Amount: @Model.TotalAmount</p>
            <p>Total with VAT: @Model.TotalAmountWithVat</p>
        }
    }
}

<a href="/">Back to Home</a>