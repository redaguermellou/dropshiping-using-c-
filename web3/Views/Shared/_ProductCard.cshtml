@model ecom.Models.Product

<div class="product-card animate-on-scroll">
    <!-- Image Container with Actions -->
    <div class="product-image-container position-relative">
        @if (!string.IsNullOrEmpty(Model.ImageUrl))
        {
            <img src="@Model.ImageUrl" class="img-fluid product-image-zoom" alt="@Model.Name" loading="lazy">
        }
        else
        {
            <div class="bg-light d-flex align-items-center justify-content-center h-100">
                <i class="bi bi-image text-muted fs-1"></i>
            </div>
        }

        <!-- Quick Actions -->
        <div class="product-actions">
            <button class="btn btn-sm btn-light rounded-circle"
                    data-quick-view
                    data-product-id="@Model.Id"
                    data-bs-toggle="tooltip"
                    data-bs-placement="left"
                    title="Quick View">
                <i class="bi bi-eye"></i>
            </button>
            <button class="btn btn-sm btn-light rounded-circle"
                    data-wishlist
                    data-bs-toggle="tooltip"
                    data-bs-placement="left"
                    title="Add to Wishlist">
                <i class="bi bi-heart"></i>
            </button>
        </div>

        <!-- Stock Status -->
        @if (!Model.InStock)
        {
            <div class="position-absolute top-0 start-0 m-2">
                <span class="badge bg-danger">Out of Stock</span>
            </div>
        }
        else if (Model.LowStock)
        {
            <div class="position-absolute top-0 start-0 m-2">
                <span class="badge bg-warning">Low Stock</span>
            </div>
        }
    </div>

    <!-- Product Info -->
    <div class="p-3">
        <!-- Category -->
        <div class="mb-2">
            <span class="badge bg-primary bg-opacity-10 text-primary">@Model.Category?.Name</span>
        </div>

        <!-- Name and Description -->
        <h6 class="product-name mb-2 fw-semibold">@Model.Name</h6>
        <p class="text-muted small mb-3">@Utils.truncateText(Model.Description, 80)</p>

        <!-- Price and Actions -->
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <span class="h5 text-primary mb-0">@Model.Price.ToString("C2")</span>
                <small class="text-muted d-block">Incl. VAT</small>
            </div>

            <div class="btn-group">
                <!-- View Details -->
                <a asp-controller="Home"
                   asp-action="ProductDetails"
                   asp-route-id="@Model.Id"
                   class="btn btn-sm btn-outline-primary"
                   data-bs-toggle="tooltip"
                   title="View Details">
                    <i class="bi bi-eye"></i>
                </a>

                <!-- Add to Cart -->
                @if (Model.InStock)
                {
                    <button class="btn btn-sm btn-primary"
                            data-add-to-cart
                            data-product-id="@Model.Id"
                            data-product-name="@Model.Name"
                            data-bs-toggle="tooltip"
                            title="Add to Cart">
                        <i class="bi bi-cart-plus"></i>
                    </button>
                }
                else
                {
                    <button class="btn btn-sm btn-secondary" disabled>
                        <i class="bi bi-cart-x"></i>
                    </button>
                }
            </div>
        </div>

        <!-- Additional Info -->
        <div class="mt-3 pt-3 border-top small text-muted">
            <div class="d-flex justify-content-between">
                <span><i class="bi bi-truck me-1"></i> Free Shipping</span>
                <span><i class="bi bi-shield-check me-1"></i> 2 Year Warranty</span>
            </div>
        </div>
    </div>
</div>